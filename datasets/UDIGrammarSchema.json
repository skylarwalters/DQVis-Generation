{
  "$ref": "#/definitions/UDIGrammar",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "AggregateFunction": {
      "additionalProperties": false,
      "description": "An aggregate function for summarizing data.",
      "properties": {
        "field": {
          "description": "The field to aggregate. Optional.",
          "type": "string"
        },
        "op": {
          "description": "The operation to apply (e.g., count, sum, mean, etc.).",
          "enum": ["count", "sum", "mean", "min", "max", "median", "frequency"],
          "type": "string"
        }
      },
      "required": ["op"],
      "type": "object"
    },
    "ArcEncodingOptions": {
      "description": "Encoding options for arc marks.",
      "enum": ["theta", "theta2", "radius", "radius2", "color"],
      "type": "string"
    },
    "ArcFieldMapping": {
      "$ref": "#/definitions/GenericFieldMapping%3CArcEncodingOptions%3E",
      "description": "A field mapping for arc marks."
    },
    "ArcLayer": {
      "$ref": "#/definitions/GenericLayer%3C%22arc%22%2CArcMapping%3E",
      "description": "A layer for rendering arc marks."
    },
    "ArcMapping": {
      "anyOf": [
        {
          "$ref": "#/definitions/ArcFieldMapping"
        },
        {
          "$ref": "#/definitions/ArcValueMapping"
        }
      ],
      "description": "The mapping for arc marks."
    },
    "ArcValueMapping": {
      "$ref": "#/definitions/GenericValueMapping%3CArcEncodingOptions%3E",
      "description": "A value mapping for arc marks."
    },
    "AreaEncodingOptions": {
      "description": "Encoding options for area marks.",
      "enum": ["x", "y", "y2", "color", "stroke", "opacity"],
      "type": "string"
    },
    "AreaFieldMapping": {
      "$ref": "#/definitions/GenericFieldMapping%3CAreaEncodingOptions%3E",
      "description": "A field mapping for area marks."
    },
    "AreaLayer": {
      "$ref": "#/definitions/GenericLayer%3C%22area%22%2CAreaMapping%3E",
      "description": "A layer for rendering area marks."
    },
    "AreaMapping": {
      "anyOf": [
        {
          "$ref": "#/definitions/AreaFieldMapping"
        },
        {
          "$ref": "#/definitions/AreaValueMapping"
        }
      ],
      "description": "The mapping for area marks."
    },
    "AreaValueMapping": {
      "$ref": "#/definitions/GenericValueMapping%3CAreaEncodingOptions%3E",
      "description": "A value mapping for area marks."
    },
    "BarEncodingOptions": {
      "description": "Encoding options for bar marks.",
      "enum": ["x", "x2", "y", "y2", "xOffset", "yOffset", "color"],
      "type": "string"
    },
    "BarFieldMapping": {
      "$ref": "#/definitions/GenericFieldMapping%3CBarEncodingOptions%3E",
      "description": "A field mapping for bar marks."
    },
    "BarLayer": {
      "$ref": "#/definitions/GenericLayer%3C%22bar%22%2CBarMapping%3E",
      "description": "A layer for rendering bar marks."
    },
    "BarMapping": {
      "anyOf": [
        {
          "$ref": "#/definitions/BarFieldMapping"
        },
        {
          "$ref": "#/definitions/BarValueMapping"
        }
      ],
      "description": "The mapping for bar marks."
    },
    "BarValueMapping": {
      "$ref": "#/definitions/GenericValueMapping%3CBarEncodingOptions%3E",
      "description": "A value mapping for bar marks."
    },
    "BinBy": {
      "additionalProperties": false,
      "description": "Bins data into intervals for a specified field.",
      "properties": {
        "binby": {
          "additionalProperties": false,
          "description": "Configuration for binning the data.",
          "properties": {
            "bins": {
              "description": "The number of bins to create. Optional.",
              "type": "number"
            },
            "field": {
              "description": "The field to bin.",
              "type": "string"
            },
            "nice": {
              "description": "Whether to use \"nice\" bin boundaries. Optional.",
              "type": "boolean"
            },
            "output": {
              "additionalProperties": false,
              "description": "Output field names for the bin start and end. Optional.",
              "properties": {
                "bin_end": {
                  "type": "string"
                },
                "bin_start": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          },
          "required": ["field"],
          "type": "object"
        },
        "in": {
          "description": "The name of the input table. If not specified, it assumes the output of the previous operation.",
          "type": "string"
        },
        "out": {
          "description": "The name of the output table. If not specified, it overwrites the name of the previous table.",
          "type": "string"
        }
      },
      "required": ["binby"],
      "type": "object"
    },
    "CategoryFieldUnion": {
      "additionalProperties": false,
      "description": "Field Unions require a list of fields, and the domain is the union of the fields. Or if a.domain = ['cat', 'dog'], b.domain = ['cat', 'mouse'], then the domain is ['cat', 'dog', 'mouse'].",
      "properties": {
        "categoryFields": {
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "required": ["categoryFields"],
      "type": "object"
    },
    "DataSelection": {
      "additionalProperties": false,
      "description": "Configuration for data selection in visualizations or tables.",
      "properties": {
        "fields": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          ],
          "description": "The fields selected from the data points. If not specified, all fields are selected."
        },
        "how": {
          "anyOf": [
            {
              "$ref": "#/definitions/DataSelectionInterval"
            },
            {
              "$ref": "#/definitions/DataSelectionPoint"
            }
          ],
          "description": "How the data is selected in the visualization / table."
        },
        "name": {
          "description": "The name of the data selection.",
          "type": "string"
        }
      },
      "required": ["name", "how"],
      "type": "object"
    },
    "DataSelectionInterval": {
      "additionalProperties": false,
      "description": "Configuration for interval-based data selection.",
      "properties": {
        "on": {
          "description": "The axis or axes to apply the selection on ('x', 'y', or both ('xy')).",
          "enum": ["x", "y", "xy"],
          "type": "string"
        },
        "type": {
          "const": "interval",
          "description": "The type of selection (interval).",
          "type": "string"
        }
      },
      "required": ["type", "on"],
      "type": "object"
    },
    "DataSelectionPoint": {
      "additionalProperties": false,
      "description": "Configuration for point-based data selection.",
      "properties": {
        "type": {
          "const": "point",
          "description": "The type of selection (point).",
          "type": "string"
        }
      },
      "required": ["type"],
      "type": "object"
    },
    "DataSource": {
      "additionalProperties": false,
      "description": "A single tabular data source. Currently, only CSV files are supported.",
      "properties": {
        "name": {
          "description": "The unique name of the data source.",
          "type": "string"
        },
        "source": {
          "description": "The URL of the CSV file.",
          "type": "string"
        }
      },
      "required": ["name", "source"],
      "type": "object"
    },
    "DataTransformation": {
      "anyOf": [
        {
          "$ref": "#/definitions/GroupBy"
        },
        {
          "$ref": "#/definitions/BinBy"
        },
        {
          "$ref": "#/definitions/RollUp"
        },
        {
          "$ref": "#/definitions/Join"
        },
        {
          "$ref": "#/definitions/OrderBy"
        },
        {
          "$ref": "#/definitions/Derive"
        },
        {
          "$ref": "#/definitions/Filter"
        },
        {
          "$ref": "#/definitions/KDE"
        }
      ],
      "description": "The possible data transformations. These include operations like grouping, filtering, joining, and more."
    },
    "DataTypes": {
      "description": "The possible data types for fields.",
      "enum": ["quantitative", "ordinal", "nominal"],
      "type": "string"
    },
    "Derive": {
      "additionalProperties": false,
      "description": "Derives new fields based on expressions.",
      "properties": {
        "derive": {
          "additionalProperties": {
            "$ref": "#/definitions/DeriveExpression"
          },
          "description": "A mapping of output field names to derive expressions.",
          "type": "object"
        },
        "in": {
          "description": "The name of the input table. If not specified, it assumes the output of the previous operation.",
          "type": "string"
        },
        "out": {
          "description": "The name of the output table. If not specified, it overwrites the name of the previous table.",
          "type": "string"
        }
      },
      "required": ["derive"],
      "type": "object"
    },
    "DeriveExpression": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "$ref": "#/definitions/RollingDeriveExpression"
        }
      ],
      "description": "A derive expression, which can be a string or a rolling derive expression."
    },
    "DirectionalOrder": {
      "additionalProperties": false,
      "description": "Defines a sorting order and a field to sort by.",
      "properties": {
        "field": {
          "description": "The name of the field to be sorted.",
          "type": "string"
        },
        "order": {
          "description": "The sorting order for the field, either ascending ('asc') or descending ('desc').",
          "enum": ["asc", "desc"],
          "type": "string"
        }
      },
      "required": ["field", "order"],
      "type": "object"
    },
    "Domain": {
      "anyOf": [
        {
          "$ref": "#/definitions/NumberDomain"
        },
        {
          "$ref": "#/definitions/StringDomain"
        },
        {
          "$ref": "#/definitions/FieldUnion"
        }
      ],
      "description": "Represents a domain for visual encodings. This can be a numerical domain, a string domain, or a field union."
    },
    "FieldUnion": {
      "anyOf": [
        {
          "$ref": "#/definitions/NumberFieldUnion"
        },
        {
          "$ref": "#/definitions/CategoryFieldUnion"
        }
      ],
      "description": "A union of field types, which can be either numerical or categorical."
    },
    "Filter": {
      "additionalProperties": false,
      "description": "Filters data based on a specified condition or selection.",
      "properties": {
        "filter": {
          "$ref": "#/definitions/FilterExpression",
          "description": "The filter condition or selection."
        },
        "in": {
          "description": "The name of the input table. If not specified, it assumes the output of the previous operation.",
          "type": "string"
        },
        "out": {
          "description": "The name of the output table. If not specified, it overwrites the name of the previous table.",
          "type": "string"
        }
      },
      "required": ["filter"],
      "type": "object"
    },
    "FilterDataSelection": {
      "additionalProperties": false,
      "description": "A data selection used for filtering.",
      "properties": {
        "match": {
          "description": "Specifies whether to use 'all' or 'any' of the selected data in a 1-to-many mapping. Default is 'any'.",
          "enum": ["all", "any"],
          "type": "string"
        },
        "name": {
          "description": "The name of the selection.",
          "type": "string"
        }
      },
      "required": ["name"],
      "type": "object"
    },
    "FilterExpression": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "$ref": "#/definitions/FilterDataSelection"
        }
      ],
      "description": "A filter expression, which can be a string or a data selection."
    },
    "GenericFieldMapping<ArcEncodingOptions>": {
      "additionalProperties": false,
      "description": "A generic field mapping for visual encodings.",
      "properties": {
        "domain": {
          "$ref": "#/definitions/Domain",
          "description": "The custom domain will change the scaling of visual encodings."
        },
        "encoding": {
          "$ref": "#/definitions/ArcEncodingOptions",
          "description": "The encoding type (e.g., x, y, color)."
        },
        "field": {
          "description": "The field to map to the encoding.",
          "type": "string"
        },
        "omitLegend": {
          "description": "Set to true to omit the legend for this encoding.",
          "type": "boolean"
        },
        "range": {
          "$ref": "#/definitions/Domain",
          "description": "The custom range will change the scaling of visual encodings."
        },
        "type": {
          "$ref": "#/definitions/DataTypes",
          "description": "The data type of the field (e.g., quantitative, ordinal, nominal)."
        }
      },
      "required": ["encoding", "field", "type"],
      "type": "object"
    },
    "GenericFieldMapping<AreaEncodingOptions>": {
      "additionalProperties": false,
      "description": "A generic field mapping for visual encodings.",
      "properties": {
        "domain": {
          "$ref": "#/definitions/Domain",
          "description": "The custom domain will change the scaling of visual encodings."
        },
        "encoding": {
          "$ref": "#/definitions/AreaEncodingOptions",
          "description": "The encoding type (e.g., x, y, color)."
        },
        "field": {
          "description": "The field to map to the encoding.",
          "type": "string"
        },
        "omitLegend": {
          "description": "Set to true to omit the legend for this encoding.",
          "type": "boolean"
        },
        "range": {
          "$ref": "#/definitions/Domain",
          "description": "The custom range will change the scaling of visual encodings."
        },
        "type": {
          "$ref": "#/definitions/DataTypes",
          "description": "The data type of the field (e.g., quantitative, ordinal, nominal)."
        }
      },
      "required": ["encoding", "field", "type"],
      "type": "object"
    },
    "GenericFieldMapping<BarEncodingOptions>": {
      "additionalProperties": false,
      "description": "A generic field mapping for visual encodings.",
      "properties": {
        "domain": {
          "$ref": "#/definitions/Domain",
          "description": "The custom domain will change the scaling of visual encodings."
        },
        "encoding": {
          "$ref": "#/definitions/BarEncodingOptions",
          "description": "The encoding type (e.g., x, y, color)."
        },
        "field": {
          "description": "The field to map to the encoding.",
          "type": "string"
        },
        "omitLegend": {
          "description": "Set to true to omit the legend for this encoding.",
          "type": "boolean"
        },
        "range": {
          "$ref": "#/definitions/Domain",
          "description": "The custom range will change the scaling of visual encodings."
        },
        "type": {
          "$ref": "#/definitions/DataTypes",
          "description": "The data type of the field (e.g., quantitative, ordinal, nominal)."
        }
      },
      "required": ["encoding", "field", "type"],
      "type": "object"
    },
    "GenericFieldMapping<GeometryEncodingOptions>": {
      "additionalProperties": false,
      "description": "A generic field mapping for visual encodings.",
      "properties": {
        "domain": {
          "$ref": "#/definitions/Domain",
          "description": "The custom domain will change the scaling of visual encodings."
        },
        "encoding": {
          "$ref": "#/definitions/GeometryEncodingOptions",
          "description": "The encoding type (e.g., x, y, color)."
        },
        "field": {
          "description": "The field to map to the encoding.",
          "type": "string"
        },
        "omitLegend": {
          "description": "Set to true to omit the legend for this encoding.",
          "type": "boolean"
        },
        "range": {
          "$ref": "#/definitions/Domain",
          "description": "The custom range will change the scaling of visual encodings."
        },
        "type": {
          "$ref": "#/definitions/DataTypes",
          "description": "The data type of the field (e.g., quantitative, ordinal, nominal)."
        }
      },
      "required": ["encoding", "field", "type"],
      "type": "object"
    },
    "GenericFieldMapping<LineEncodingOptions>": {
      "additionalProperties": false,
      "description": "A generic field mapping for visual encodings.",
      "properties": {
        "domain": {
          "$ref": "#/definitions/Domain",
          "description": "The custom domain will change the scaling of visual encodings."
        },
        "encoding": {
          "$ref": "#/definitions/LineEncodingOptions",
          "description": "The encoding type (e.g., x, y, color)."
        },
        "field": {
          "description": "The field to map to the encoding.",
          "type": "string"
        },
        "omitLegend": {
          "description": "Set to true to omit the legend for this encoding.",
          "type": "boolean"
        },
        "range": {
          "$ref": "#/definitions/Domain",
          "description": "The custom range will change the scaling of visual encodings."
        },
        "type": {
          "$ref": "#/definitions/DataTypes",
          "description": "The data type of the field (e.g., quantitative, ordinal, nominal)."
        }
      },
      "required": ["encoding", "field", "type"],
      "type": "object"
    },
    "GenericFieldMapping<PointEncodingOptions>": {
      "additionalProperties": false,
      "description": "A generic field mapping for visual encodings.",
      "properties": {
        "domain": {
          "$ref": "#/definitions/Domain",
          "description": "The custom domain will change the scaling of visual encodings."
        },
        "encoding": {
          "$ref": "#/definitions/PointEncodingOptions",
          "description": "The encoding type (e.g., x, y, color)."
        },
        "field": {
          "description": "The field to map to the encoding.",
          "type": "string"
        },
        "omitLegend": {
          "description": "Set to true to omit the legend for this encoding.",
          "type": "boolean"
        },
        "range": {
          "$ref": "#/definitions/Domain",
          "description": "The custom range will change the scaling of visual encodings."
        },
        "type": {
          "$ref": "#/definitions/DataTypes",
          "description": "The data type of the field (e.g., quantitative, ordinal, nominal)."
        }
      },
      "required": ["encoding", "field", "type"],
      "type": "object"
    },
    "GenericFieldMapping<RectEncodingOptions>": {
      "additionalProperties": false,
      "description": "A generic field mapping for visual encodings.",
      "properties": {
        "domain": {
          "$ref": "#/definitions/Domain",
          "description": "The custom domain will change the scaling of visual encodings."
        },
        "encoding": {
          "$ref": "#/definitions/RectEncodingOptions",
          "description": "The encoding type (e.g., x, y, color)."
        },
        "field": {
          "description": "The field to map to the encoding.",
          "type": "string"
        },
        "omitLegend": {
          "description": "Set to true to omit the legend for this encoding.",
          "type": "boolean"
        },
        "range": {
          "$ref": "#/definitions/Domain",
          "description": "The custom range will change the scaling of visual encodings."
        },
        "type": {
          "$ref": "#/definitions/DataTypes",
          "description": "The data type of the field (e.g., quantitative, ordinal, nominal)."
        }
      },
      "required": ["encoding", "field", "type"],
      "type": "object"
    },
    "GenericFieldMapping<TextEncodingOptions>": {
      "additionalProperties": false,
      "description": "A generic field mapping for visual encodings.",
      "properties": {
        "domain": {
          "$ref": "#/definitions/Domain",
          "description": "The custom domain will change the scaling of visual encodings."
        },
        "encoding": {
          "$ref": "#/definitions/TextEncodingOptions",
          "description": "The encoding type (e.g., x, y, color)."
        },
        "field": {
          "description": "The field to map to the encoding.",
          "type": "string"
        },
        "omitLegend": {
          "description": "Set to true to omit the legend for this encoding.",
          "type": "boolean"
        },
        "range": {
          "$ref": "#/definitions/Domain",
          "description": "The custom range will change the scaling of visual encodings."
        },
        "type": {
          "$ref": "#/definitions/DataTypes",
          "description": "The data type of the field (e.g., quantitative, ordinal, nominal)."
        }
      },
      "required": ["encoding", "field", "type"],
      "type": "object"
    },
    "GenericLayer<\"arc\",ArcMapping>": {
      "additionalProperties": false,
      "description": "A generic layer for visualizing data.",
      "properties": {
        "mapping": {
          "anyOf": [
            {
              "$ref": "#/definitions/ArcMapping"
            },
            {
              "items": {
                "$ref": "#/definitions/ArcMapping"
              },
              "type": "array"
            }
          ],
          "description": "The mapping of data fields or values to visual encodings."
        },
        "mark": {
          "const": "arc",
          "description": "The type of mark used in the layer.",
          "type": "string"
        },
        "select": {
          "$ref": "#/definitions/DataSelection",
          "description": "The data selection configuration for the layer. Optional."
        }
      },
      "required": ["mark", "mapping"],
      "type": "object"
    },
    "GenericLayer<\"area\",AreaMapping>": {
      "additionalProperties": false,
      "description": "A generic layer for visualizing data.",
      "properties": {
        "mapping": {
          "anyOf": [
            {
              "$ref": "#/definitions/AreaMapping"
            },
            {
              "items": {
                "$ref": "#/definitions/AreaMapping"
              },
              "type": "array"
            }
          ],
          "description": "The mapping of data fields or values to visual encodings."
        },
        "mark": {
          "const": "area",
          "description": "The type of mark used in the layer.",
          "type": "string"
        },
        "select": {
          "$ref": "#/definitions/DataSelection",
          "description": "The data selection configuration for the layer. Optional."
        }
      },
      "required": ["mark", "mapping"],
      "type": "object"
    },
    "GenericLayer<\"bar\",BarMapping>": {
      "additionalProperties": false,
      "description": "A generic layer for visualizing data.",
      "properties": {
        "mapping": {
          "anyOf": [
            {
              "$ref": "#/definitions/BarMapping"
            },
            {
              "items": {
                "$ref": "#/definitions/BarMapping"
              },
              "type": "array"
            }
          ],
          "description": "The mapping of data fields or values to visual encodings."
        },
        "mark": {
          "const": "bar",
          "description": "The type of mark used in the layer.",
          "type": "string"
        },
        "select": {
          "$ref": "#/definitions/DataSelection",
          "description": "The data selection configuration for the layer. Optional."
        }
      },
      "required": ["mark", "mapping"],
      "type": "object"
    },
    "GenericLayer<\"geometry\",GeometryMapping>": {
      "additionalProperties": false,
      "description": "A generic layer for visualizing data.",
      "properties": {
        "mapping": {
          "anyOf": [
            {
              "$ref": "#/definitions/GeometryMapping"
            },
            {
              "items": {
                "$ref": "#/definitions/GeometryMapping"
              },
              "type": "array"
            }
          ],
          "description": "The mapping of data fields or values to visual encodings."
        },
        "mark": {
          "const": "geometry",
          "description": "The type of mark used in the layer.",
          "type": "string"
        },
        "select": {
          "$ref": "#/definitions/DataSelection",
          "description": "The data selection configuration for the layer. Optional."
        }
      },
      "required": ["mark", "mapping"],
      "type": "object"
    },
    "GenericLayer<\"line\",LineMapping>": {
      "additionalProperties": false,
      "description": "A generic layer for visualizing data.",
      "properties": {
        "mapping": {
          "anyOf": [
            {
              "$ref": "#/definitions/LineMapping"
            },
            {
              "items": {
                "$ref": "#/definitions/LineMapping"
              },
              "type": "array"
            }
          ],
          "description": "The mapping of data fields or values to visual encodings."
        },
        "mark": {
          "const": "line",
          "description": "The type of mark used in the layer.",
          "type": "string"
        },
        "select": {
          "$ref": "#/definitions/DataSelection",
          "description": "The data selection configuration for the layer. Optional."
        }
      },
      "required": ["mark", "mapping"],
      "type": "object"
    },
    "GenericLayer<\"point\",PointMapping>": {
      "additionalProperties": false,
      "description": "A generic layer for visualizing data.",
      "properties": {
        "mapping": {
          "anyOf": [
            {
              "$ref": "#/definitions/PointMapping"
            },
            {
              "items": {
                "$ref": "#/definitions/PointMapping"
              },
              "type": "array"
            }
          ],
          "description": "The mapping of data fields or values to visual encodings."
        },
        "mark": {
          "const": "point",
          "description": "The type of mark used in the layer.",
          "type": "string"
        },
        "select": {
          "$ref": "#/definitions/DataSelection",
          "description": "The data selection configuration for the layer. Optional."
        }
      },
      "required": ["mark", "mapping"],
      "type": "object"
    },
    "GenericLayer<\"rect\",RectMapping>": {
      "additionalProperties": false,
      "description": "A generic layer for visualizing data.",
      "properties": {
        "mapping": {
          "anyOf": [
            {
              "$ref": "#/definitions/RectMapping"
            },
            {
              "items": {
                "$ref": "#/definitions/RectMapping"
              },
              "type": "array"
            }
          ],
          "description": "The mapping of data fields or values to visual encodings."
        },
        "mark": {
          "const": "rect",
          "description": "The type of mark used in the layer.",
          "type": "string"
        },
        "select": {
          "$ref": "#/definitions/DataSelection",
          "description": "The data selection configuration for the layer. Optional."
        }
      },
      "required": ["mark", "mapping"],
      "type": "object"
    },
    "GenericLayer<\"row\",RowMapping>": {
      "additionalProperties": false,
      "description": "A generic layer for visualizing data.",
      "properties": {
        "mapping": {
          "anyOf": [
            {
              "$ref": "#/definitions/RowMapping"
            },
            {
              "items": {
                "$ref": "#/definitions/RowMapping"
              },
              "type": "array"
            }
          ],
          "description": "The mapping of data fields or values to visual encodings."
        },
        "mark": {
          "const": "row",
          "description": "The type of mark used in the layer.",
          "type": "string"
        },
        "select": {
          "$ref": "#/definitions/DataSelection",
          "description": "The data selection configuration for the layer. Optional."
        }
      },
      "required": ["mark", "mapping"],
      "type": "object"
    },
    "GenericLayer<\"text\",TextMapping>": {
      "additionalProperties": false,
      "description": "A generic layer for visualizing data.",
      "properties": {
        "mapping": {
          "anyOf": [
            {
              "$ref": "#/definitions/TextMapping"
            },
            {
              "items": {
                "$ref": "#/definitions/TextMapping"
              },
              "type": "array"
            }
          ],
          "description": "The mapping of data fields or values to visual encodings."
        },
        "mark": {
          "const": "text",
          "description": "The type of mark used in the layer.",
          "type": "string"
        },
        "select": {
          "$ref": "#/definitions/DataSelection",
          "description": "The data selection configuration for the layer. Optional."
        }
      },
      "required": ["mark", "mapping"],
      "type": "object"
    },
    "GenericValueMapping<ArcEncodingOptions>": {
      "additionalProperties": false,
      "description": "A generic value mapping for visual encodings.",
      "properties": {
        "encoding": {
          "$ref": "#/definitions/ArcEncodingOptions",
          "description": "The encoding type (e.g., x, y, color)."
        },
        "value": {
          "description": "The value to map to the encoding.",
          "type": ["string", "number"]
        }
      },
      "required": ["encoding", "value"],
      "type": "object"
    },
    "GenericValueMapping<AreaEncodingOptions>": {
      "additionalProperties": false,
      "description": "A generic value mapping for visual encodings.",
      "properties": {
        "encoding": {
          "$ref": "#/definitions/AreaEncodingOptions",
          "description": "The encoding type (e.g., x, y, color)."
        },
        "value": {
          "description": "The value to map to the encoding.",
          "type": ["string", "number"]
        }
      },
      "required": ["encoding", "value"],
      "type": "object"
    },
    "GenericValueMapping<BarEncodingOptions>": {
      "additionalProperties": false,
      "description": "A generic value mapping for visual encodings.",
      "properties": {
        "encoding": {
          "$ref": "#/definitions/BarEncodingOptions",
          "description": "The encoding type (e.g., x, y, color)."
        },
        "value": {
          "description": "The value to map to the encoding.",
          "type": ["string", "number"]
        }
      },
      "required": ["encoding", "value"],
      "type": "object"
    },
    "GenericValueMapping<GeometryEncodingOptions>": {
      "additionalProperties": false,
      "description": "A generic value mapping for visual encodings.",
      "properties": {
        "encoding": {
          "$ref": "#/definitions/GeometryEncodingOptions",
          "description": "The encoding type (e.g., x, y, color)."
        },
        "value": {
          "description": "The value to map to the encoding.",
          "type": ["string", "number"]
        }
      },
      "required": ["encoding", "value"],
      "type": "object"
    },
    "GenericValueMapping<LineEncodingOptions>": {
      "additionalProperties": false,
      "description": "A generic value mapping for visual encodings.",
      "properties": {
        "encoding": {
          "$ref": "#/definitions/LineEncodingOptions",
          "description": "The encoding type (e.g., x, y, color)."
        },
        "value": {
          "description": "The value to map to the encoding.",
          "type": ["string", "number"]
        }
      },
      "required": ["encoding", "value"],
      "type": "object"
    },
    "GenericValueMapping<PointEncodingOptions>": {
      "additionalProperties": false,
      "description": "A generic value mapping for visual encodings.",
      "properties": {
        "encoding": {
          "$ref": "#/definitions/PointEncodingOptions",
          "description": "The encoding type (e.g., x, y, color)."
        },
        "value": {
          "description": "The value to map to the encoding.",
          "type": ["string", "number"]
        }
      },
      "required": ["encoding", "value"],
      "type": "object"
    },
    "GenericValueMapping<RectEncodingOptions>": {
      "additionalProperties": false,
      "description": "A generic value mapping for visual encodings.",
      "properties": {
        "encoding": {
          "$ref": "#/definitions/RectEncodingOptions",
          "description": "The encoding type (e.g., x, y, color)."
        },
        "value": {
          "description": "The value to map to the encoding.",
          "type": ["string", "number"]
        }
      },
      "required": ["encoding", "value"],
      "type": "object"
    },
    "GenericValueMapping<TextEncodingOptions>": {
      "additionalProperties": false,
      "description": "A generic value mapping for visual encodings.",
      "properties": {
        "encoding": {
          "$ref": "#/definitions/TextEncodingOptions",
          "description": "The encoding type (e.g., x, y, color)."
        },
        "value": {
          "description": "The value to map to the encoding.",
          "type": ["string", "number"]
        }
      },
      "required": ["encoding", "value"],
      "type": "object"
    },
    "GeometryEncodingOptions": {
      "description": "Encoding options for geometry marks.",
      "enum": ["color", "stroke", "strokeWidth"],
      "type": "string"
    },
    "GeometryFieldMapping": {
      "$ref": "#/definitions/GenericFieldMapping%3CGeometryEncodingOptions%3E",
      "description": "A field mapping for geometry marks."
    },
    "GeometryLayer": {
      "$ref": "#/definitions/GenericLayer%3C%22geometry%22%2CGeometryMapping%3E",
      "description": "A layer for rendering geometry marks."
    },
    "GeometryMapping": {
      "anyOf": [
        {
          "$ref": "#/definitions/GeometryFieldMapping"
        },
        {
          "$ref": "#/definitions/GeometryValueMapping"
        }
      ],
      "description": "The mapping for geometry marks."
    },
    "GeometryValueMapping": {
      "$ref": "#/definitions/GenericValueMapping%3CGeometryEncodingOptions%3E",
      "description": "A value mapping for geometry marks."
    },
    "GroupBy": {
      "additionalProperties": false,
      "description": "Groups data by specified fields.",
      "properties": {
        "groupby": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          ],
          "description": "The field(s) to group by."
        },
        "in": {
          "description": "The name of the input table. If not specified, it assumes the output of the previous operation.",
          "type": "string"
        },
        "out": {
          "description": "The name of the output table. If not specified, it overwrites the name of the previous table.",
          "type": "string"
        }
      },
      "required": ["groupby"],
      "type": "object"
    },
    "Join": {
      "additionalProperties": false,
      "description": "Joins two tables based on a specified condition.",
      "properties": {
        "in": {
          "description": "The names of the two input tables to join.",
          "items": {
            "type": "string"
          },
          "maxItems": 2,
          "minItems": 2,
          "type": "array"
        },
        "join": {
          "additionalProperties": false,
          "description": "Configuration for the join operation.",
          "properties": {
            "on": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "items": {
                    "type": "string"
                  },
                  "maxItems": 2,
                  "minItems": 2,
                  "type": "array"
                },
                {
                  "items": {
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  },
                  "maxItems": 2,
                  "minItems": 2,
                  "type": "array"
                }
              ],
              "description": "The field(s) to join on. If one field is specified, it's assumed to be the same in both tables. If two fields are specified, the first field is from the first table and the second field is from the second table."
            }
          },
          "required": ["on"],
          "type": "object"
        },
        "out": {
          "description": "The name of the output table. If not specified, it overwrites the name of the previous table.",
          "type": "string"
        }
      },
      "required": ["in", "join"],
      "type": "object"
    },
    "KDE": {
      "additionalProperties": false,
      "description": "Applies Kernel Density Estimation (KDE) to a specified field.",
      "properties": {
        "in": {
          "description": "The name of the input table. If not specified, it assumes the output of the previous operation.",
          "type": "string"
        },
        "kde": {
          "additionalProperties": false,
          "description": "Configuration for the KDE operation.",
          "properties": {
            "bandwidth": {
              "description": "The bandwidth for the KDE. Optional.",
              "type": "number"
            },
            "field": {
              "description": "The field to apply KDE to.",
              "type": "string"
            },
            "output": {
              "additionalProperties": false,
              "description": "Output field names for the KDE results. Optional.",
              "properties": {
                "density": {
                  "type": "string"
                },
                "sample": {
                  "type": "string"
                }
              },
              "type": "object"
            },
            "samples": {
              "description": "The number of samples to generate. Optional.",
              "type": "number"
            }
          },
          "required": ["field"],
          "type": "object"
        },
        "out": {
          "description": "The name of the output table. If not specified, it overwrites the name of the previous table.",
          "type": "string"
        }
      },
      "required": ["kde"],
      "type": "object"
    },
    "LineEncodingOptions": {
      "description": "Encoding options for line marks.",
      "enum": ["x", "y", "color"],
      "type": "string"
    },
    "LineFieldMapping": {
      "$ref": "#/definitions/GenericFieldMapping%3CLineEncodingOptions%3E",
      "description": "A field mapping for line marks."
    },
    "LineLayer": {
      "$ref": "#/definitions/GenericLayer%3C%22line%22%2CLineMapping%3E",
      "description": "A layer for rendering line marks."
    },
    "LineMapping": {
      "anyOf": [
        {
          "$ref": "#/definitions/LineFieldMapping"
        },
        {
          "$ref": "#/definitions/LineValueMapping"
        }
      ],
      "description": "The mapping for line marks."
    },
    "LineValueMapping": {
      "$ref": "#/definitions/GenericValueMapping%3CLineEncodingOptions%3E",
      "description": "A value mapping for line marks."
    },
    "NumberDomain": {
      "additionalProperties": false,
      "description": "Represents a numerical domain with a minimum and maximum value.",
      "properties": {
        "max": {
          "type": "number"
        },
        "min": {
          "type": "number"
        }
      },
      "required": ["min", "max"],
      "type": "object"
    },
    "NumberFieldUnion": {
      "additionalProperties": false,
      "description": "Field Unions require a list of fields, and the domain is the union of the fields. e.g. If a.domain = [0, 10], b.domain = [5, 15], then the domain is [0, 15].",
      "properties": {
        "numberFields": {
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "required": ["numberFields"],
      "type": "object"
    },
    "OrderBy": {
      "additionalProperties": false,
      "description": "Orders data by a specified field or fields.",
      "properties": {
        "in": {
          "description": "The name of the input table. If not specified, it assumes the output of the previous operation.",
          "type": "string"
        },
        "orderby": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "$ref": "#/definitions/DirectionalOrder"
            },
            {
              "items": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "$ref": "#/definitions/DirectionalOrder"
                  }
                ]
              },
              "type": "array"
            }
          ],
          "description": "The field(s) to order by, default in ascending order."
        },
        "out": {
          "description": "The name of the output table. If not specified, it overwrites the name of the previous table.",
          "type": "string"
        }
      },
      "required": ["orderby"],
      "type": "object"
    },
    "PointEncodingOptions": {
      "description": "Encoding options for point marks.",
      "enum": ["x", "y", "xOffset", "yOffset", "color", "size", "shape"],
      "type": "string"
    },
    "PointFieldMapping": {
      "$ref": "#/definitions/GenericFieldMapping%3CPointEncodingOptions%3E",
      "description": "A field mapping for point marks."
    },
    "PointLayer": {
      "$ref": "#/definitions/GenericLayer%3C%22point%22%2CPointMapping%3E",
      "description": "A layer for rendering point marks."
    },
    "PointMapping": {
      "anyOf": [
        {
          "$ref": "#/definitions/PointFieldMapping"
        },
        {
          "$ref": "#/definitions/PointValueMapping"
        }
      ],
      "description": "The mapping for point marks."
    },
    "PointValueMapping": {
      "$ref": "#/definitions/GenericValueMapping%3CPointEncodingOptions%3E",
      "description": "A value mapping for point marks."
    },
    "RectEncodingOptions": {
      "description": "Encoding options for rect marks.",
      "enum": ["x", "x2", "y", "y2", "color"],
      "type": "string"
    },
    "RectFieldMapping": {
      "$ref": "#/definitions/GenericFieldMapping%3CRectEncodingOptions%3E",
      "description": "A field mapping for rect marks."
    },
    "RectLayer": {
      "$ref": "#/definitions/GenericLayer%3C%22rect%22%2CRectMapping%3E",
      "description": "A layer for rendering rect marks."
    },
    "RectMapping": {
      "anyOf": [
        {
          "$ref": "#/definitions/RectFieldMapping"
        },
        {
          "$ref": "#/definitions/RectValueMapping"
        }
      ],
      "description": "The mapping for rect marks."
    },
    "RectValueMapping": {
      "$ref": "#/definitions/GenericValueMapping%3CRectEncodingOptions%3E",
      "description": "A value mapping for rect marks."
    },
    "Representation": {
      "anyOf": [
        {
          "$ref": "#/definitions/VisualizationLayer"
        },
        {
          "$ref": "#/definitions/RowLayer"
        }
      ],
      "description": "A visual representation of the data, such as a chart or table."
    },
    "Representations": {
      "anyOf": [
        {
          "items": {
            "$ref": "#/definitions/VisualizationLayer"
          },
          "type": "array"
        },
        {
          "items": {
            "$ref": "#/definitions/RowLayer"
          },
          "type": "array"
        }
      ],
      "description": "A list of visual representations. Charts and tables cannot be intermixed."
    },
    "RollUp": {
      "additionalProperties": false,
      "description": "Aggregates data by applying specified functions to groups.",
      "properties": {
        "in": {
          "description": "The name of the input table. If not specified, it assumes the output of the previous operation.",
          "type": "string"
        },
        "out": {
          "description": "The name of the output table. If not specified, it overwrites the name of the previous table.",
          "type": "string"
        },
        "rollup": {
          "additionalProperties": {
            "$ref": "#/definitions/AggregateFunction"
          },
          "description": "A mapping of output field names to aggregate functions.",
          "type": "object"
        }
      },
      "required": ["rollup"],
      "type": "object"
    },
    "RollingDeriveExpression": {
      "additionalProperties": false,
      "description": "A rolling derive expression for creating new fields based on a rolling window.",
      "properties": {
        "rolling": {
          "additionalProperties": false,
          "description": "Configuration for the rolling derive expression.",
          "properties": {
            "expression": {
              "description": "The expression to apply.",
              "type": "string"
            },
            "window": {
              "description": "The rolling window size. Optional.",
              "items": {
                "type": "number"
              },
              "maxItems": 2,
              "minItems": 2,
              "type": "array"
            }
          },
          "required": ["expression"],
          "type": "object"
        }
      },
      "required": ["rolling"],
      "type": "object"
    },
    "RowEncodingOptions": {
      "description": "Encoding options for row marks.",
      "enum": [
        "text",
        "x",
        "x2",
        "y",
        "xOffset",
        "yOffset",
        "color",
        "size",
        "shape"
      ],
      "type": "string"
    },
    "RowLayer": {
      "$ref": "#/definitions/GenericLayer%3C%22row%22%2CRowMapping%3E",
      "description": "A layer for rendering row marks."
    },
    "RowMapping": {
      "additionalProperties": false,
      "description": "The mapping for row marks.",
      "properties": {
        "column": {
          "description": "The target display column. If empty, the target column is based on the field name. This is needed so that you can construct columns that map multiple fields to the same mark within the column. E.g. a bar where the width is based on a quantitative field and the color is if based on a derived boolean field if the value is positive or negative.",
          "type": "string"
        },
        "domain": {
          "$ref": "#/definitions/Domain",
          "description": "The custom domain will change the scaling of visual encodings."
        },
        "encoding": {
          "$ref": "#/definitions/RowEncodingOptions",
          "description": "The encoding type (e.g., x, y, color)."
        },
        "field": {
          "description": "The field to map to the encoding.",
          "type": "string"
        },
        "mark": {
          "$ref": "#/definitions/RowMarkOptions",
          "description": "The type of mark used in the row layer."
        },
        "omitLegend": {
          "description": "Set to true to omit the legend for this encoding.",
          "type": "boolean"
        },
        "orderby": {
          "description": "The value to use when sorting by the column in the interface. This will not affect the default sorting of the table. defaults to the field name.",
          "type": "string"
        },
        "range": {
          "$ref": "#/definitions/Domain",
          "description": "The custom range will change the scaling of visual encodings."
        },
        "type": {
          "$ref": "#/definitions/DataTypes",
          "description": "The data type of the field (e.g., quantitative, ordinal, nominal)."
        }
      },
      "required": ["encoding", "field", "mark", "type"],
      "type": "object"
    },
    "RowMarkOptions": {
      "description": "Mark options for row layers.",
      "enum": ["select", "text", "geometry", "point", "bar", "rect", "line"],
      "type": "string"
    },
    "StringDomain": {
      "description": "Represents a string domain with a list of possible values.",
      "items": {
        "type": "string"
      },
      "type": "array"
    },
    "TextEncodingOptions": {
      "description": "Encoding options for text marks.",
      "enum": ["x", "y", "color", "text", "size", "theta", "radius"],
      "type": "string"
    },
    "TextFieldMapping": {
      "$ref": "#/definitions/GenericFieldMapping%3CTextEncodingOptions%3E",
      "description": "A field mapping for text marks."
    },
    "TextLayer": {
      "$ref": "#/definitions/GenericLayer%3C%22text%22%2CTextMapping%3E",
      "description": "A layer for rendering text marks."
    },
    "TextMapping": {
      "anyOf": [
        {
          "$ref": "#/definitions/TextFieldMapping"
        },
        {
          "$ref": "#/definitions/TextValueMapping"
        }
      ],
      "description": "The mapping for text marks."
    },
    "TextValueMapping": {
      "$ref": "#/definitions/GenericValueMapping%3CTextEncodingOptions%3E",
      "description": "A value mapping for text marks."
    },
    "UDIGrammar": {
      "additionalProperties": false,
      "description": "The Universal Discovery Interface (UDI) Grammar.",
      "properties": {
        "representation": {
          "anyOf": [
            {
              "$ref": "#/definitions/Representation"
            },
            {
              "$ref": "#/definitions/Representations"
            }
          ],
          "description": "The visual representation of the data as either a visualization or table. If not specificed the default is a table witha all fields."
        },
        "source": {
          "anyOf": [
            {
              "$ref": "#/definitions/DataSource"
            },
            {
              "items": {
                "$ref": "#/definitions/DataSource"
              },
              "type": "array"
            }
          ],
          "description": "The data source or data sources. This can be a single CSV file or a list of CSV files."
        },
        "transformation": {
          "description": "The data transformations applied to the source data before displaying the data.",
          "items": {
            "$ref": "#/definitions/DataTransformation"
          },
          "type": "array"
        }
      },
      "required": ["source"],
      "type": "object"
    },
    "VisualizationLayer": {
      "anyOf": [
        {
          "$ref": "#/definitions/LineLayer"
        },
        {
          "$ref": "#/definitions/AreaLayer"
        },
        {
          "$ref": "#/definitions/GeometryLayer"
        },
        {
          "$ref": "#/definitions/RectLayer"
        },
        {
          "$ref": "#/definitions/BarLayer"
        },
        {
          "$ref": "#/definitions/PointLayer"
        },
        {
          "$ref": "#/definitions/TextLayer"
        },
        {
          "$ref": "#/definitions/ArcLayer"
        }
      ],
      "description": "A visualization layer for rendering data. This can include various types of marks such as lines, bars, points, etc."
    }
  }
}
